import{r as c,j as e,p as f,b,B as m}from"./index-DFFnt1R-.js";const g=()=>{const[a,x]=c.useState([]),[l,p]=c.useState("free"),[h,i]=c.useState(0),d=async()=>{try{const s=await fetch(`${m}/cart`,{method:"GET",credentials:"include"});if(!s.ok)throw new Error("Failed to fetch cart products");const t=await s.json();x(t.items.map(r=>({id:r.product._id,title:r.product.name,price:r.product.price,image:r.product.images[0],quantity:r.quantity,color:r.color,subtotal:r.product.price*r.quantity})))}catch(s){console.log("Error fetching cart products:",s)}};c.useEffect(()=>{d()},[]);const n=s=>{const t=s.target.value;switch(p(t),t){case"express":i(50);break;case"pickup":i(100);break;case"free":default:i(0);break}},u=async s=>{try{if(!(await fetch(`${m}/cart/${s}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to remove product from cart");d()}catch(t){console.log("Error removing product from cart:",t)}},o=a.reduce((s,t)=>s+t.subtotal,0),j=o+h;return e.jsxs("div",{className:"mt-10 px-4",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl text-center font-medium mb-10",children:"Cart"}),a.length===0?e.jsx("div",{className:"text-center text-lg font-medium",children:e.jsx("p",{children:"No products available in the cart."})}):e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-10 mb:my-16 lg:my-20",children:[e.jsx("div",{className:"w-full md:w-2/3",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary text-left",children:[e.jsx("th",{className:"py-2 sm:py-3 px-2 sm:px-4",children:"Product"}),e.jsx("th",{className:"py-2 sm:py-3 px-2 sm:px-4",children:"Quantity"}),e.jsx("th",{className:"py-2 sm:py-3 px-2 sm:px-4",children:"Price"}),e.jsx("th",{className:"py-2 sm:py-3 px-2 sm:px-4",children:"Subtotal"})]})}),e.jsx("tbody",{children:a.map(s=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsxs("td",{className:"py-4 px-2 sm:px-4 flex items-center gap-4",children:[e.jsx("div",{className:"bg-gray-100 p-2 hidden md:block",children:e.jsx("img",{src:s.image,alt:"product",className:"w-10 h-10 sm:w-14 sm:h-14"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"font-medium text-sm sm:text-base",children:s.title}),e.jsxs("p",{className:"text-gray-400 text-xs sm:text-sm",children:["Color: ",s.color]}),e.jsxs("p",{className:"flex items-center gap-1 text-red-600 cursor-pointer text-xs sm:text-sm",onClick:()=>u(s.id),children:[e.jsx(f,{size:18}),e.jsx("span",{children:"Remove"})]})]})]}),e.jsx("td",{className:"py-4 px-2 sm:px-4 text-sm",children:s.quantity}),e.jsxs("td",{className:"py-4 px-2 sm:px-4 text-sm",children:["₹",s.price]}),e.jsxs("td",{className:"py-4 px-2 sm:px-4 text-sm",children:["₹",s.subtotal]})]},s.id))})]})}),e.jsxs("div",{className:"w-full md:w-1/3 p-4 sm:p-6 border border-primary rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-lg font-medium mb-4",children:"Cart Summary"}),e.jsxs("form",{className:"flex flex-col gap-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border border-primary rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"shipping",value:"free",checked:l==="free",onChange:n}),e.jsx("label",{children:"Free shipping"})]}),e.jsx("span",{children:"₹0"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border border-primary rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"shipping",value:"express",checked:l==="express",onChange:n}),e.jsx("label",{children:"Express shipping"})]}),e.jsx("span",{children:"₹50"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border border-primary rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"shipping",value:"pickup",checked:l==="pickup",onChange:n}),e.jsx("label",{children:"Pick up"})]}),e.jsx("span",{children:"₹100"})]})]}),e.jsxs("div",{className:"flex justify-between text-sm my-5",children:[e.jsx("p",{children:"Subtotal"}),e.jsxs("p",{className:"font-medium",children:["₹",o]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-medium",children:[e.jsx("p",{children:"Total"}),e.jsxs("p",{children:["₹",j]})]}),a.length>0&&e.jsx(b,{to:"/checkout",children:e.jsx("button",{className:"button w-full my-3",children:"Checkout"})})]})]})]})};export{g as default};
